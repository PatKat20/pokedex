<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokeInfo</title>
    <link rel="stylesheet" href="../css/cardPokemon.css">
</head>

<body>
    <div class="informations"></div>

    <script src="../js/pokeApi.js"></script>
    <script defer>
        const info = document.querySelector(".informations")
        const urlParams = new URLSearchParams(window.location.search);
        const pokeUrl = id => `https://pokeapi.co/api/v2/pokemon/${id}`

        const pokeId = urlParams.get("id")

        function getDetais(pokemons) {
            return fetch(pokemons.url)
                   .then(response => response.json())
                   .then(convertJsonToCard)
        }

        function insertIntoHtml(pokemon){
            document.body.innerHTML = pokemon
        }

        function convertJsonToCard(pokeInfo){
            let [type1, type2] = pokeInfo.types
            let pokeImg = pokeInfo.sprites.other.dream_world.front_default

            return `
                <div style="background-color:${pokeApi.pokemonColor[type1.type.name]}" class="cardPokemon">
                    <a href="../index.html" id="returnIcon">
                        <ion-icon name="return-down-back-outline" ></ion-icon>
                    </a>
                    <h2 id="pokeCardName">${pokeInfo.name}</h2>
                    <span class="pokeTypeCard">${type1.type.name}</span>
                    ${pokeApi.verifyTypeAndInsert(type2, "pokeTypeCard")}
                    <div class="pokeInfoArea">
                        <div class="experience">
                            <p>Experience</p>
                            <p>${pokeInfo.base_experience}</p>
                        </div>

                        <div class="height">
                            <p>Height</p>
                            <p>${pokeInfo.height}</p>
                        </div>

                        <div class="weight">
                            <p>Weight</p>
                            <p>${pokeInfo.weight}</p>
                        </div>

                        <div class="pokeImgArea">
                            <img src="${pokeImg}"></img>
                        </div>
                    </div>
                    
                    </div>
                    <div class="wave">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#f3f4f5" fill-opacity="1" d="M0,224L26.7,224C53.3,224,107,224,160,202.7C213.3,181,267,139,320,106.7C373.3,75,427,53,480,80C533.3,107,587,181,640,208C693.3,235,747,213,800,218.7C853.3,224,907,256,960,261.3C1013.3,267,1067,245,1120,234.7C1173.3,224,1227,224,1280,229.3C1333.3,235,1387,245,1413,250.7L1440,256L1440,320L1413.3,320C1386.7,320,1333,320,1280,320C1226.7,320,1173,320,1120,320C1066.7,320,1013,320,960,320C906.7,320,853,320,800,320C746.7,320,693,320,640,320C586.7,320,533,320,480,320C426.7,320,373,320,320,320C266.7,320,213,320,160,320C106.7,320,53,320,27,320L0,320Z"></path></svg>
                    </div>
            `
        }

        fetch(pokeUrl(pokeId))
            .then(response => response.json())
            .then(convertJsonToCard)
            .then(insertIntoHtml)

    </script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>